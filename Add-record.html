<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Record | ArchaeoVault</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<nav class="navbar">
    <div class="logo">ArchaeoVault</div>
    <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="Add-record.html">Add Record</a>
        <a href="Records.html">Records</a>
        <a href="News.html">News</a>
        <a href="about.html">About</a>
    </div>
</nav>
<div id="loginBox">
  <h2>Login to Add Record</h2>
  <input type="text" id="username" placeholder="Username"><br><br>
  <input type="password" id="password" placeholder="Password"><br><br>
  <button onclick="login()">Login</button>
</div>
<div id="recordSection" style="display:none;">
  <h2>Add Archaeological Record</h2>

  <label>Archaeologist Name:</label><br>
  <input type="text" id="archName"><br><br>

  <label>Artifact Name:</label><br>
  <input type="text" id="artifact"><br><br>

  <label>Location:</label><br>
  <input type="text" id="location"><br><br>

  <label>Description:</label><br>
  <textarea id="description"></textarea><br><br>

  <label>Upload Photo:</label><br>
  <input type="file" id="photo" accept="image/*"><br><br>

  <button onclick="saveRecord()">Save Record</button>
</div>
<h2 style="text-align:center;">Archaeologist Access</h2>
<div id="loginSection"></div>
<script>
let users = {
  arch1: "1234",
  arch2: "abcd"
};

function login(){
  let u = document.getElementById("username").value;
  let p = document.getElementById("password").value;

  if(users[u] && users[u] === p){
    localStorage.setItem("currentUser", u);
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("recordSection").style.display = "block";
  } else {
    alert("Invalid username or password");
  }
}

function saveRecord(){
  let records = JSON.parse(localStorage.getItem("records")) || [];

  let photoFile = document.getElementById("photo").files[0];
  let reader = new FileReader();

  reader.onload = function(){
    records.push({
      user: localStorage.getItem("currentUser"),
      archaeologist: document.getElementById("archName").value,
      artifact: document.getElementById("artifact").value,
      location: document.getElementById("location").value,
      description: document.getElementById("description").value,
      photo: reader.result
    });

    localStorage.setItem("records", JSON.stringify(records));
    alert("Record saved successfully!");
  };

  if(photoFile){
    reader.readAsDataURL(photoFile);
  } else {
    reader.onload();
  }
}
</script>
</body>
</html>