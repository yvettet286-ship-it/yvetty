<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Records Database - Unearthed</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>UNEARTHED DATABASE</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="records.html">View Records</a>
            <a href="add-record.html">Add Record (Staff Only)</a>
            <a href="ai-chat.html">AI Chat</a>
        </nav>
    </header>

    <div class="explore-container">
        <h2>Discovery Records</h2>
        <div id="recordsList">
            </div>
    </div>

    <script>
        const recordsList = document.getElementById('recordsList');
        const records = JSON.parse(localStorage.getItem('archRecords') || '[]');
        const currentUser = localStorage.getItem('currentUser');

        if (records.length === 0) {
            recordsList.innerHTML = "<p style='text-align:center;'>No records found in the database.</p>";
        } else {
            records.forEach((rec) => {
                const card = document.createElement('div');
                card.className = 'record-card';
                
                // Read-only view for everyone
                card.innerHTML = `
                    <h3>${rec.artifact}</h3>
                    <p><strong>Found By:</strong> ${rec.arch}</p>
                    <p><strong>Location:</strong> ${rec.loc}</p>
                    <p><strong>Period:</strong> ${rec.time}</p>
                    <p>${rec.desc}</p>
                    ${rec.video ? `<p><a href="${rec.video}" target="_blank" style="color:#2ecc71;">Watch Discovery Video</a></p>` : ''}
                `;

                // If logged in, they can "Write" (Edit placeholder)
                if (currentUser) {
                    const editBtn = document.createElement('button');
                    editBtn.innerText = "Edit Record";
                    editBtn.onclick = () => alert("Edit mode enabled for " + currentUser);
                    card.appendChild(editBtn);
                }

                recordsList.appendChild(card);
            });
        }
    </script>
</body>
</html>